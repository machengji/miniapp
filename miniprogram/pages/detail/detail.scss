page {
  background-color: #121212;
  color: #e0e0e0;
  height: 100vh;
}

.detail-scroll {
  height: 100vh;
  padding-top: 108px;
  padding-bottom: 40rpx;
  box-sizing: border-box;
}

.container {
  padding: 40rpx;
  padding-bottom: 40rpx;
}

// ===== 加载状态 =====
.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding-top: 200rpx;
  
  .loading-spinner {
    width: 60rpx;
    height: 60rpx;
    border: 4rpx solid var(--border-secondary);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  
  .loading-text {
    margin-top: 20rpx;
    font-size: 28rpx;
    color: #666;
  }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

// ===== 头部信息 =====
.header-section {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 30rpx;
  
  .date-badge {
    .date-text {
      font-size: 26rpx;
      color: #888;
    }
  }
  
  .mood-badge {
    display: flex;
    align-items: center;
    padding: 12rpx 24rpx;
    border-radius: 30rpx;
    font-size: 26rpx;
    
    .mood-icon {
      font-size: 32rpx;
      margin-right: 12rpx;
    }
  }
}

// ===== 标题 =====
.title-section {
  margin-bottom: 30rpx;
  
  .dream-title {
    font-size: 44rpx;
    font-weight: 700;
    color: #fff;
    line-height: 1.4;
    background: var(--primary-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
}

// ===== 元数据 =====
.meta-section {
  background: rgba(255, 255, 255, 0.03);
  border-radius: 16rpx;
  padding: 24rpx;
  margin-bottom: 30rpx;
  
  .meta-item {
    display: flex;
    align-items: center;
;
    gap: 20rpx;
    
    .meta-label {
      font-size: 26rpx;
      color: #888;
      min-width: 100rpx;
    }
    
    .clarity-bar {
      flex: 1;
      height: 8rpx;
      background: #333;
      border-radius: 4rpx;
      overflow: hidden;
      
      .clarity-fill {
        height: 100%;
        border-radius: 4rpx;
        transition: width 0.3s;
      }
    }
    
    .clarity-value {
      font-size: 26rpx;
      color: #666;
      min-width: 60rpx;
      text-align: right;
    }
  }
}

// ===== 关键词 =====
.keywords-section {
  margin-bottom: 30rpx;
  
  .section-label {
    display: block;
    font-size: 24rpx;
    color: #666;
    margin-bottom: 16rpx;
    text-transform: uppercase;
    letter-spacing: 2rpx;
  }
  
  .keywords-list {
    display: flex;
    flex-wrap: wrap;
    gap: 16rpx;
    
    .keyword-tag {
      font-size: 26rpx;
      color: #8a6dff;
      background: rgba(138, 109, 255, 0.1);
      padding: 12rpx 24rpx;
      border-radius: 12rpx;
      border: 1px solid rgba(138, 109, 255, 0.2);
    }
  }
}

// ===== 内容区块 =====
.content-section, .analysis-section {
  margin-bottom: 40rpx;
  
  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20rpx;
    
    .copy-btn {
      display: flex;
      align-items: center;
      padding: 12rpx 20rpx;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12rpx;
      
      .copy-icon {
        font-size: 28rpx;
        margin-right: 8rpx;
      }
      
      .copy-text {
        font-size: 24rpx;
        color: #888;
      }
      
      &:active {
        background: rgba(255, 255, 255, 0.1);
      }
    }
  }
  
  .section-label {
    display: block;
    font-size: 24rpx;
    color: #666;
    margin-bottom: 20rpx;
    text-transform: uppercase;
    letter-spacing: 2rpx;
  }
  
  .content-box, .analysis-box {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 20rpx;
    padding: 32rpx;
    border: 1px solid rgba(255, 255, 255, 0.05);
    
    .content-text, .analysis-text {
      font-size: 30rpx;
      color: #d0d0d0;
      line-height: 1.8;
    }
  }
}

// ===== 思考过程 =====
  .thought-box {
    background: #181818;
    border-radius: 16rpx;
    border: 1px solid #2a2a2a;
    border-left: 4rpx solid var(--accent-purple);
    margin-bottom: 24rpx;
    overflow: hidden;
    
    .thought-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 24rpx;
      background: #222;
      
      .thought-title {
        display: flex;
        align-items: center;
        font-size: 26rpx;
        color: #888;
        
        .brain-icon {
          color: var(--accent-purple);
          margin-right: 12rpx;
          font-size: 28rpx;
          animation: pulse 3s infinite;
        }
      }
      
      .toggle-icon {
        font-size: 24rpx;
        color: #666;
        transition: transform 0.3s;
        
        &.expanded {
          transform: rotate(180deg);
        }
      }
    }
    
    .thought-content {
      padding: 28rpx;
      font-size: 26rpx;
      color: #888;
      font-family: 'Courier New', monospace;
      line-height: 1.7;
      background: #151515;
      white-space: pre-wrap;
    }
  }

@keyframes pulse {
  0%, 100% { opacity: 0.5; text-shadow: 0 0 10rpx var(--accent-purple); }
  50% { opacity: 1; }
}

// ===== 原型分布 =====
.archetype-section {
  margin-bottom: 40rpx;
  
  .section-label {
    display: block;
    font-size: 24rpx;
    color: #666;
    margin-bottom: 24rpx;
    text-transform: uppercase;
    letter-spacing: 2rpx;
  }
  
  .archetype-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 20rpx;
    
    .archetype-card {
      flex: 1 1 calc(33.33% - 20rpx);
      min-width: 180rpx;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 20rpx;
      padding: 24rpx;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      overflow: hidden;
      
      .card-icon {
        width: 64rpx;
        height: 64rpx;
        margin-bottom: 16rpx;
        filter: drop-shadow(0 0 8rpx rgba(201, 168, 108, 0.3));
      }
      
      .card-name {
        font-size: 24rpx;
        color: #aaa;
        margin-bottom: 12rpx;
      }
      
      .card-bar {
        width: 100%;
        height: 6rpx;
        background: #333;
        border-radius: 3rpx;
        margin-bottom: 8rpx;
        
        .card-fill {
          height: 100%;
          background: var(--primary-gradient);
          border-radius: 3rpx;
        }
      }
      
      .card-score {
        font-size: 32rpx;
        font-weight: bold;
        color: var(--primary);
      }
    }
  }
}

// ===== 操作按钮 =====
.action-section {
  display: flex;
  gap: 24rpx;
  margin-top: 40rpx;
  
  .share-btn, .delete-btn {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 28rpx;
    border-radius: 16rpx;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    
    &::after {
      border: none;
    }
    
    .btn-icon {
      font-size: 32rpx;
      margin-right: 12rpx;
    }
    
    .btn-text {
      font-size: 28rpx;
      color: #e0e0e0;
    }
    
    &:active {
      background: rgba(255, 255, 255, 0.1);
    }
  }
  
  .delete-btn {
    background: rgba(229, 115, 115, 0.1);
    border-color: rgba(229, 115, 115, 0.3);
    
    .btn-text {
      color: #E57373;
    }
    
    &:active {
      background: rgba(229, 115, 115, 0.2);
    }
  }
}

// ===== 安全区域适配 =====
@supports (padding-bottom: env(safe-area-inset-bottom)) {
  .detail-scroll {
    padding-bottom: calc(40rpx + env(safe-area-inset-bottom));
  }
}
